{"ast":null,"code":"var _jsxFileName = \"/home/anderson-mello/delivery-app-test/front-end/src/Components/ProductCard.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { AppContext } from '../Context/provider';\nimport { saveCart } from '../Services/Storage';\nimport { ProductCardDiv } from './Styles/productCard';\nimport images from '../images';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ProductCard(_ref) {\n  _s();\n  let {\n    product\n  } = _ref;\n  const {\n    cart,\n    setCart\n  } = useContext(AppContext);\n  const [quantity, setQuantity] = useState(0);\n  useEffect(() => {\n    const updateQuantity = () => {\n      cart.forEach(item => {\n        if (item.productId === product.id) {\n          setQuantity(item.quantity);\n        }\n      });\n      saveCart(cart);\n    };\n    updateQuantity();\n  }, [cart]);\n  const addTocart = () => {\n    setQuantity(prev => prev + 1);\n    const newCart = cart.map(item => {\n      if (item.productId === product.id) {\n        return {\n          ...item,\n          quantity: Number(item.quantity) + 1,\n          subTotal: Number((item.subTotal + item.unitPrice).toFixed(2))\n        };\n      }\n      return item;\n    });\n    if (JSON.stringify(newCart) === JSON.stringify(cart)) {\n      return setCart(prev => [...prev, {\n        productId: product.id,\n        name: product.name,\n        quantity: 1,\n        unitPrice: Number(product.price),\n        subTotal: Number(product.price)\n      }]);\n    }\n    return setCart(newCart);\n  };\n  const removeItem = () => {\n    setQuantity(prev => {\n      if (prev === 0) {\n        return 0;\n      }\n      return prev - 1;\n    });\n    const newCart = cart.map(item => {\n      if (item.productId === product.id) {\n        return {\n          ...item,\n          quantity: Number(item.quantity) - 1,\n          subTotal: Number((item.subTotal - item.unitPrice).toFixed(2))\n        };\n      }\n      return item;\n    });\n    if (quantity === 1) {\n      const newCart2 = cart.filter(item => item.productId !== product.id);\n      return setCart(newCart2);\n    }\n    return setCart(newCart);\n  };\n  const updateCart = _ref2 => {\n    let {\n      target\n    } = _ref2;\n    const newCart = cart.map(item => {\n      if (item.productId === product.id && target.value > 0) {\n        return {\n          ...item,\n          quantity: Number(target.value),\n          subTotal: Number((product.price * target.value).toFixed(2))\n        };\n      }\n      return item;\n    });\n    if (JSON.stringify(newCart) === JSON.stringify(cart) && target.value > 0) {\n      return setCart(prev => [...prev, {\n        productId: product.id,\n        name: product.name,\n        quantity: target.value,\n        unitPrice: Number(product.price),\n        subTotal: Number((product.price * target.value).toFixed(2))\n      }]);\n    }\n    return setCart(newCart);\n  };\n  return /*#__PURE__*/_jsxDEV(ProductCardDiv, {\n    className: \"product-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n      \"data-testid\": `customer_products__element-card-price-${product.id}`,\n      children: Number(product.price).toLocaleString('pt-br', {\n        style: 'currency',\n        currency: 'BRL'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: images[product.urlImage],\n      alt: \"product-logo\",\n      \"data-testid\": `customer_products__img-card-bg-image-${product.id}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        \"data-testid\": `customer_products__element-card-title-${product.id}`,\n        children: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"quantity-buttons\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: removeItem,\n          type: \"button\",\n          \"data-testid\": `customer_products__button-card-rm-item-${product.id}`,\n          children: \"-\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          min: \"0\",\n          value: quantity,\n          onChange: updateCart,\n          type: \"number\",\n          \"data-testid\": `customer_products__input-card-quantity-${product.id}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: addTocart,\n          type: \"button\",\n          \"data-testid\": `customer_products__button-card-add-item-${product.id}`,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this)]\n  }, product.id, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_s(ProductCard, \"ykReC5p/ZL+sGAfXqcE7gZrLgtw=\");\n_c = ProductCard;\nProductCard.propTypes = {\n  product: PropTypes.shape(PropTypes.any.isRequired).isRequired\n};\nvar _c;\n$RefreshReg$(_c, \"ProductCard\");","map":{"version":3,"names":["React","useContext","useEffect","useState","PropTypes","AppContext","saveCart","ProductCardDiv","images","ProductCard","product","cart","setCart","quantity","setQuantity","updateQuantity","forEach","item","productId","id","addTocart","prev","newCart","map","Number","subTotal","unitPrice","toFixed","JSON","stringify","name","price","removeItem","newCart2","filter","updateCart","target","value","toLocaleString","style","currency","urlImage","propTypes","shape","any","isRequired"],"sources":["/home/anderson-mello/delivery-app-test/front-end/src/Components/ProductCard.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { AppContext } from '../Context/provider';\nimport { saveCart } from '../Services/Storage';\nimport { ProductCardDiv } from './Styles/productCard';\nimport images from '../images';\n\nexport default function ProductCard({ product }) {\n  const { cart, setCart } = useContext(AppContext);\n  const [quantity, setQuantity] = useState(0);\n\n  useEffect(() => {\n    const updateQuantity = () => {\n      cart.forEach((item) => {\n        if (item.productId === product.id) {\n          setQuantity(item.quantity);\n        }\n      });\n\n      saveCart(cart);\n    };\n\n    updateQuantity();\n  }, [cart]);\n\n  const addTocart = () => {\n    setQuantity((prev) => prev + 1);\n\n    const newCart = cart.map((item) => {\n      if (item.productId === product.id) {\n        return {\n          ...item,\n          quantity: Number(item.quantity) + 1,\n          subTotal: Number((item.subTotal + item.unitPrice).toFixed(2)),\n        };\n      }\n\n      return item;\n    });\n\n    if (JSON.stringify(newCart) === JSON.stringify(cart)) {\n      return setCart((prev) => [\n        ...prev,\n        {\n          productId: product.id,\n          name: product.name,\n          quantity: 1,\n          unitPrice: Number(product.price),\n          subTotal: Number(product.price),\n        },\n      ]);\n    }\n\n    return setCart(newCart);\n  };\n\n  const removeItem = () => {\n    setQuantity((prev) => {\n      if (prev === 0) {\n        return 0;\n      }\n      return prev - 1;\n    });\n\n    const newCart = cart.map((item) => {\n      if (item.productId === product.id) {\n        return {\n          ...item,\n          quantity: Number(item.quantity) - 1,\n          subTotal: Number((item.subTotal - item.unitPrice).toFixed(2)),\n        };\n      }\n\n      return item;\n    });\n\n    if (quantity === 1) {\n      const newCart2 = cart.filter((item) => item.productId !== product.id);\n\n      return setCart(newCart2);\n    }\n    return setCart(newCart);\n  };\n\n  const updateCart = ({ target }) => {\n    const newCart = cart.map((item) => {\n      if (item.productId === product.id && target.value > 0) {\n        return {\n          ...item,\n          quantity: Number(target.value),\n          subTotal: Number((product.price * target.value).toFixed(2)),\n        };\n      }\n\n      return item;\n    });\n\n    if (JSON.stringify(newCart) === JSON.stringify(cart) && target.value > 0) {\n      return setCart((prev) => [\n        ...prev,\n        {\n          productId: product.id,\n          name: product.name,\n          quantity: target.value,\n          unitPrice: Number(product.price),\n          subTotal: Number((product.price * target.value).toFixed(2)),\n        },\n      ]);\n    }\n\n    return setCart(newCart);\n  };\n\n  return (\n    <ProductCardDiv className=\"product-card\" key={ product.id }>\n      <span data-testid={ `customer_products__element-card-price-${product.id}` }>\n          { Number(product.price)\n            .toLocaleString('pt-br', { style: 'currency', currency: 'BRL' }) }\n      </span>\n      <img\n        src={ images[product.urlImage] }\n        alt=\"product-logo\"\n        data-testid={ `customer_products__img-card-bg-image-${product.id}` }\n      />\n      <div>\n        <p data-testid={ `customer_products__element-card-title-${product.id}` }>\n          { product.name }\n        </p>\n        <div className=\"quantity-buttons\">\n          <button\n            onClick={ removeItem }\n            type=\"button\"\n            data-testid={ `customer_products__button-card-rm-item-${product.id}` }\n          >\n            -\n          </button>\n          <input\n            min=\"0\"\n            value={ quantity }\n            onChange={ updateCart }\n            type=\"number\"\n            data-testid={ `customer_products__input-card-quantity-${product.id}` }\n          />\n          <button\n            onClick={ addTocart }\n            type=\"button\"\n            data-testid={ `customer_products__button-card-add-item-${product.id}` }\n          >\n            +\n          </button>\n        </div>\n      </div>\n    </ProductCardDiv>\n  );\n}\n\nProductCard.propTypes = {\n  product: PropTypes.shape(\n    PropTypes.any.isRequired,\n  ).isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}