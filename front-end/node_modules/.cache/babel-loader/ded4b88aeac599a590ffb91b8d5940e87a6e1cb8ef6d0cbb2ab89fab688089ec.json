{"ast":null,"code":"var _jsxFileName = \"/home/anderson-mello/delivery-app-test/front-end/src/Pages/Register.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { requestRegister } from \"../Services/Request\";\nimport { saveUserInfo } from \"../Services/Storage\";\nimport { FilledButton, LoginForm, LoginPage } from \"./Styles/login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [requestError, setRequestError] = useState(false);\n  const emailRegex = /^[a-z0-9._-]+@[a-z0-9]+\\.[a-z]/i;\n  const validEmail = emailRegex.test(email);\n  const history = useHistory();\n  function buttonDisable(_ref) {\n    let {\n      target\n    } = _ref;\n    setEmail(target.value);\n    setRequestError(false);\n  }\n  const saveInfoAndRedirect = userInfo => {\n    const {\n      role\n    } = userInfo;\n    saveUserInfo(userInfo);\n    const path = {\n      customer: \"/customer/products\",\n      administrator: \"/admin/manage\",\n      seller: \"/seller/orders\"\n    };\n    return history.push(path[role]);\n  };\n  async function HandleClick() {\n    try {\n      const {\n        id: _,\n        ...userWithoutId\n      } = await requestRegister(\"/register\", {\n        email,\n        password,\n        name\n      });\n      saveInfoAndRedirect(userWithoutId);\n    } catch (error) {\n      setRequestError(true);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(LoginPage, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: beer,\n          alt: \"logo\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoginForm, {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"input-name\",\n          children: [\"Nome\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"input-name\",\n            \"data-testid\": \"common_register__input-name\",\n            placeholder: \"Seu nome\",\n            value: name,\n            onChange: _ref2 => {\n              let {\n                target\n              } = _ref2;\n              return setName(target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"input-email\",\n          children: [\"E-mail\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            \"data-testid\": \"common_register__input-email\",\n            id: \"input-email\",\n            value: email,\n            onChange: buttonDisable\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"input-password\",\n          children: [\"Password\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            \"data-testid\": \"common_register__input-password\",\n            id: \"input-password\",\n            value: password,\n            onChange: _ref3 => {\n              let {\n                target\n              } = _ref3;\n              return setPassword(target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !(name.length >= Number(\"12\") && validEmail && password.length >= Number(\"6\")),\n          type: \"button\",\n          \"data-testid\": \"common_register__button-register\",\n          onClick: HandleClick,\n          children: /*#__PURE__*/_jsxDEV(FilledButton, {\n            children: \"CADASTRAR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), requestError && /*#__PURE__*/_jsxDEV(\"p\", {\n      \"data-testid\": \"common_register__element-invalid_register\",\n      children: \"Falha ao fazer cadastro!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(Register, \"IoBtOTco2TrVDq/G5W65pLMLo7Y=\", false, function () {\n  return [useHistory];\n});\n_c = Register;\nvar _c;\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["useState","useHistory","requestRegister","saveUserInfo","FilledButton","LoginForm","LoginPage","Register","name","setName","email","setEmail","password","setPassword","requestError","setRequestError","emailRegex","validEmail","test","history","buttonDisable","target","value","saveInfoAndRedirect","userInfo","role","path","customer","administrator","seller","push","HandleClick","id","_","userWithoutId","error","beer","length","Number"],"sources":["/home/anderson-mello/delivery-app-test/front-end/src/Pages/Register.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { requestRegister } from \"../Services/Request\";\nimport { saveUserInfo } from \"../Services/Storage\";\nimport { FilledButton, LoginForm, LoginPage } from \"./Styles/login\";\n\nexport default function Register() {\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [requestError, setRequestError] = useState(false);\n\n  const emailRegex = /^[a-z0-9._-]+@[a-z0-9]+\\.[a-z]/i;\n  const validEmail = emailRegex.test(email);\n  const history = useHistory();\n\n  function buttonDisable({ target }) {\n    setEmail(target.value);\n    setRequestError(false);\n  }\n\n  const saveInfoAndRedirect = (userInfo) => {\n    const { role } = userInfo;\n\n    saveUserInfo(userInfo);\n\n    const path = {\n      customer: \"/customer/products\",\n      administrator: \"/admin/manage\",\n      seller: \"/seller/orders\",\n    };\n\n    return history.push(path[role]);\n  };\n\n  async function HandleClick() {\n    try {\n      const { id: _, ...userWithoutId } = await requestRegister(\"/register\", {\n        email,\n        password,\n        name,\n      });\n\n      saveInfoAndRedirect(userWithoutId);\n    } catch (error) {\n      setRequestError(true);\n    }\n  }\n\n  return (\n    <LoginPage>\n      <div>\n        <div>\n          <img src={beer} alt=\"logo\" />\n        </div>\n        <LoginForm>\n          <label htmlFor=\"input-name\">\n            Nome\n            <input\n              type=\"text\"\n              id=\"input-name\"\n              data-testid=\"common_register__input-name\"\n              placeholder=\"Seu nome\"\n              value={name}\n              onChange={({ target }) => setName(target.value)}\n            />\n          </label>\n          <label htmlFor=\"input-email\">\n            E-mail\n            <input\n              type=\"email\"\n              data-testid=\"common_register__input-email\"\n              id=\"input-email\"\n              value={email}\n              onChange={buttonDisable}\n            />\n          </label>\n          <label htmlFor=\"input-password\">\n            Password\n            <input\n              type=\"password\"\n              data-testid=\"common_register__input-password\"\n              id=\"input-password\"\n              value={password}\n              onChange={({ target }) => setPassword(target.value)}\n            />\n          </label>\n          <button\n            disabled={\n              !(\n                name.length >= Number(\"12\") &&\n                validEmail &&\n                password.length >= Number(\"6\")\n              )\n            }\n            type=\"button\"\n            data-testid=\"common_register__button-register\"\n            onClick={HandleClick}\n          >\n            <FilledButton>CADASTRAR</FilledButton>\n          </button>\n        </LoginForm>\n      </div>\n      {requestError && (\n        <p data-testid=\"common_register__element-invalid_register\">\n          Falha ao fazer cadastro!\n        </p>\n      )}\n    </LoginPage>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}